<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <script src="https://unpkg.com/axios@1.1.2/dist/axios.min.js"></script>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="styles.css" />
    <title>Weather App</title>
  </head>
  <body>
    <div class="container">
      <div class="weather-app">
        <form class="search-form" id="searchCity">
          <div class="row">
            <div class="col-9">
              <input
                type="search"
                placeholder="Type a city.."
                autofocus="on"
                autocomplete="off"
                class="form-control"
                id="searchCityInput"
              />
            </div>
            <div class="col-3">
              <input
                type="submit"
                value="Search"
                class="form-control btn btn-primary shadow-sm"
              />
            </div>
          </div>
        </form>
        <h1>Sydney</h1>
        <ul>
          <li id="date">Wednesday 22:00</li>
        </ul>
        <p>Partly Cloudy</p>

        <div class="row">
          <div class="col-6">
            <div class="clearfix">
              <img
                src="https://ssl.gstatic.com/onebox/weather/64/partly_cloudy.png"
                alt="Cloudy icon"
                class="weather-icon float-left"
              />
              <div class="float-left">
                <span class="temperature">10</span
                ><span class="units">
                  <span id="cel"><a href="#">°C</a> </span> |
                  <span id="fah"> <a href="#">°F</a></span></span
                >
              </div>
            </div>
          </div>
          <div class="col-6">
            <ul>
              <li>Precipitation: 0%</li>
              <li>Humidity: 77%</li>
              <li>Wind: 8 km/h</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <script>
      let now = new Date();
      let li = document.querySelector("#date");
      let days = [
        "Sunday",
        "Monday",
        "Tuesday",
        "Wednesday",
        "Thursday",
        "Friday",
        "Saturday",
      ];
      let day = days[now.getDay()];
      let hours = now.getHours();
      let minutes = now.getMinutes();
      li.innerHTML = `${day} ${hours}:${minutes}`;

      function showTemperature(response) {
        let temp = document.querySelector(".temperature");
        let temperatureI = Math.round(response.data.main.temp);
        temp.innerHTML = `${temperatureI}`;
        //console.log(response);
      }

      function showCity(event) {
        event.preventDefault();
        let searchInput = document.querySelector("#searchCityInput");
        let h1 = document.querySelector("h1");
        h1.innerHTML = `${searchInput.value}`;
        let apiKey = "5da7b2dc058f07286fea39c4cee516a3";
        let apiUrl = `https://api.openweathermap.org/data/2.5/weather?q=${city}
      &appid=5da7b2dc058f07286fea39c4cee516a3&units=metric`;
        axios.get(apiUrl).then(showTemperature);
      }

      let cityForm = document.querySelector("#searchCity");
      cityForm.addEventListener("submit", showCity);

      let searchInput = document.querySelector("#searchCityInput");
      let city = searchInput.value;
    </script>
  </body>
</html>
